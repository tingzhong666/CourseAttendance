import{L as bt,D as ve,E as ge,_ as E,r as m,R as I,g as He,f as Rt,e as kt,h as ke,F as At,a as It,u as Nt,M as Pt,C as Ot,b as Dt,z as O,j as C,A as H}from"./index-ZtOdBFYM.js";import{p as Ft,k as V,l as re,C as Ae,A as Tt,U as ae}from"./httpInstance-BCqN5o7-.js";import{a as zt,M as Qe,S as he,F as Lt,P as Bt}from"./Table-BoTQsXHt.js";import{u as jt,F as J,I as _t,S as Ye}from"./index-BACqsOj-.js";import{u as xt}from"./auth-Cc7oxFui.js";import{u as Vt}from"./major-QJTBo71x.js";import{D as be}from"./index-BANHh_pt.js";import{T as Re,D as Ut,A as Yt}from"./AttendanceTable-Do-u4kvx.js";import{S as me}from"./index-CmPTCLLR.js";import{I as $t,g as Ht,m as Qt,o as Gt}from"./Compact-CvTKlge1.js";import{B as fe}from"./button-DZBOrXaR.js";import"./addEventListener-CCzEBRbF.js";import"./row-qe9Z4i1C.js";import"./EllipsisOutlined-DMDszaP-.js";import"./Overflow-D3Zk1A28.js";import"./index-Csn86tSO.js";import"./index-DGk5g7-o.js";import"./useVariants-BrNfV6O7.js";function ne(r,o){var e=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!e){if(Array.isArray(r)||(e=bt(r))||o){e&&(r=e);var t=0,n=function(){};return{s:n,n:function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}},e:function(d){throw d},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,s=!0,l=!1;return{s:function(){e=e.call(r)},n:function(){var d=e.next();return s=d.done,d},e:function(d){l=!0,a=d},f:function(){try{s||e.return==null||e.return()}finally{if(l)throw a}}}}var oe,ie;function j(r,o,e){if(o<0||o>31||r>>>o)throw new RangeError("Value out of range");for(var t=o-1;t>=0;t--)e.push(r>>>t&1)}function Q(r,o){return(r>>>o&1)!=0}function _(r){if(!r)throw new Error("Assertion error")}var Y=function(){function r(o,e){ge(this,r),E(this,"modeBits",void 0),E(this,"numBitsCharCount",void 0),this.modeBits=o,this.numBitsCharCount=e}return ve(r,[{key:"numCharCountBits",value:function(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}}]),r}();oe=Y;E(Y,"NUMERIC",new oe(1,[10,12,14]));E(Y,"ALPHANUMERIC",new oe(2,[9,11,13]));E(Y,"BYTE",new oe(4,[8,16,16]));E(Y,"KANJI",new oe(8,[8,10,12]));E(Y,"ECI",new oe(7,[0,0,0]));var U=ve(function r(o,e){ge(this,r),E(this,"ordinal",void 0),E(this,"formatBits",void 0),this.ordinal=o,this.formatBits=e});ie=U;E(U,"LOW",new ie(0,1));E(U,"MEDIUM",new ie(1,0));E(U,"QUARTILE",new ie(2,3));E(U,"HIGH",new ie(3,2));var ee=function(){function r(o,e,t){if(ge(this,r),E(this,"mode",void 0),E(this,"numChars",void 0),E(this,"bitData",void 0),this.mode=o,this.numChars=e,this.bitData=t,e<0)throw new RangeError("Invalid argument");this.bitData=t.slice()}return ve(r,[{key:"getData",value:function(){return this.bitData.slice()}}],[{key:"makeBytes",value:function(e){var t=[],n=ne(e),a;try{for(n.s();!(a=n.n()).done;){var s=a.value;j(s,8,t)}}catch(l){n.e(l)}finally{n.f()}return new r(Y.BYTE,e.length,t)}},{key:"makeNumeric",value:function(e){if(!r.isNumeric(e))throw new RangeError("String contains non-numeric characters");for(var t=[],n=0;n<e.length;){var a=Math.min(e.length-n,3);j(parseInt(e.substring(n,n+a),10),a*3+1,t),n+=a}return new r(Y.NUMERIC,e.length,t)}},{key:"makeAlphanumeric",value:function(e){if(!r.isAlphanumeric(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");var t=[],n;for(n=0;n+2<=e.length;n+=2){var a=r.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n))*45;a+=r.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n+1)),j(a,11,t)}return n<e.length&&j(r.ALPHANUMERIC_CHARSET.indexOf(e.charAt(n)),6,t),new r(Y.ALPHANUMERIC,e.length,t)}},{key:"makeSegments",value:function(e){return e==""?[]:r.isNumeric(e)?[r.makeNumeric(e)]:r.isAlphanumeric(e)?[r.makeAlphanumeric(e)]:[r.makeBytes(r.toUtf8ByteArray(e))]}},{key:"makeEci",value:function(e){var t=[];if(e<0)throw new RangeError("ECI assignment value out of range");if(e<128)j(e,8,t);else if(e<16384)j(2,2,t),j(e,14,t);else if(e<1e6)j(6,3,t),j(e,21,t);else throw new RangeError("ECI assignment value out of range");return new r(Y.ECI,0,t)}},{key:"isNumeric",value:function(e){return r.NUMERIC_REGEX.test(e)}},{key:"isAlphanumeric",value:function(e){return r.ALPHANUMERIC_REGEX.test(e)}},{key:"getTotalBits",value:function(e,t){var n=0,a=ne(e),s;try{for(a.s();!(s=a.n()).done;){var l=s.value,c=l.mode.numCharCountBits(t);if(l.numChars>=1<<c)return 1/0;n+=4+c+l.bitData.length}}catch(d){a.e(d)}finally{a.f()}return n}},{key:"toUtf8ByteArray",value:function(e){for(var t=encodeURI(e),n=[],a=0;a<t.length;a++)t.charAt(a)!="%"?n.push(t.charCodeAt(a)):(n.push(parseInt(t.substring(a+1,a+3),16)),a+=2);return n}}]),r}();E(ee,"NUMERIC_REGEX",/^[0-9]*$/);E(ee,"ALPHANUMERIC_REGEX",/^[A-Z0-9 $%*+.\/:-]*$/);E(ee,"ALPHANUMERIC_CHARSET","0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:");var G=function(){function r(o,e,t,n){ge(this,r),E(this,"size",void 0),E(this,"mask",void 0),E(this,"modules",[]),E(this,"isFunction",[]),E(this,"version",void 0),E(this,"errorCorrectionLevel",void 0);var a=n;if(this.version=o,this.errorCorrectionLevel=e,o<r.MIN_VERSION||o>r.MAX_VERSION)throw new RangeError("Version value out of range");if(a<-1||a>7)throw new RangeError("Mask value out of range");this.size=o*4+17;for(var s=[],l=0;l<this.size;l++)s.push(!1);for(var c=0;c<this.size;c++)this.modules.push(s.slice()),this.isFunction.push(s.slice());this.drawFunctionPatterns();var d=this.addEccAndInterleave(t);if(this.drawCodewords(d),a==-1)for(var f=1e9,w=0;w<8;w++){this.applyMask(w),this.drawFormatBits(w);var v=this.getPenaltyScore();v<f&&(a=w,f=v),this.applyMask(w)}_(0<=a&&a<=7),this.mask=a,this.applyMask(a),this.drawFormatBits(a),this.isFunction=[]}return ve(r,[{key:"getModule",value:function(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}},{key:"getModules",value:function(){return this.modules}},{key:"drawFunctionPatterns",value:function(){for(var e=0;e<this.size;e++)this.setFunctionModule(6,e,e%2==0),this.setFunctionModule(e,6,e%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var t=this.getAlignmentPatternPositions(),n=t.length,a=0;a<n;a++)for(var s=0;s<n;s++)a==0&&s==0||a==0&&s==n-1||a==n-1&&s==0||this.drawAlignmentPattern(t[a],t[s]);this.drawFormatBits(0),this.drawVersion()}},{key:"drawFormatBits",value:function(e){for(var t=this.errorCorrectionLevel.formatBits<<3|e,n=t,a=0;a<10;a++)n=n<<1^(n>>>9)*1335;var s=(t<<10|n)^21522;_(s>>>15==0);for(var l=0;l<=5;l++)this.setFunctionModule(8,l,Q(s,l));this.setFunctionModule(8,7,Q(s,6)),this.setFunctionModule(8,8,Q(s,7)),this.setFunctionModule(7,8,Q(s,8));for(var c=9;c<15;c++)this.setFunctionModule(14-c,8,Q(s,c));for(var d=0;d<8;d++)this.setFunctionModule(this.size-1-d,8,Q(s,d));for(var f=8;f<15;f++)this.setFunctionModule(8,this.size-15+f,Q(s,f));this.setFunctionModule(8,this.size-8,!0)}},{key:"drawVersion",value:function(){if(!(this.version<7)){for(var e=this.version,t=0;t<12;t++)e=e<<1^(e>>>11)*7973;var n=this.version<<12|e;_(n>>>18==0);for(var a=0;a<18;a++){var s=Q(n,a),l=this.size-11+a%3,c=Math.floor(a/3);this.setFunctionModule(l,c,s),this.setFunctionModule(c,l,s)}}}},{key:"drawFinderPattern",value:function(e,t){for(var n=-4;n<=4;n++)for(var a=-4;a<=4;a++){var s=Math.max(Math.abs(a),Math.abs(n)),l=e+a,c=t+n;0<=l&&l<this.size&&0<=c&&c<this.size&&this.setFunctionModule(l,c,s!=2&&s!=4)}}},{key:"drawAlignmentPattern",value:function(e,t){for(var n=-2;n<=2;n++)for(var a=-2;a<=2;a++)this.setFunctionModule(e+a,t+n,Math.max(Math.abs(a),Math.abs(n))!=1)}},{key:"setFunctionModule",value:function(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}},{key:"addEccAndInterleave",value:function(e){var t=this.version,n=this.errorCorrectionLevel;if(e.length!=r.getNumDataCodewords(t,n))throw new RangeError("Invalid argument");for(var a=r.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][t],s=r.ECC_CODEWORDS_PER_BLOCK[n.ordinal][t],l=Math.floor(r.getNumRawDataModules(t)/8),c=a-l%a,d=Math.floor(l/a),f=[],w=r.reedSolomonComputeDivisor(s),v=0,y=0;v<a;v++){var g=e.slice(y,y+d-s+(v<c?0:1));y+=g.length;var p=r.reedSolomonComputeRemainder(g,w);v<c&&g.push(0),f.push(g.concat(p))}for(var h=[],M=function(S){f.forEach(function(A,R){(S!=d-s||R>=c)&&h.push(A[S])})},b=0;b<f[0].length;b++)M(b);return _(h.length==l),h}},{key:"drawCodewords",value:function(e){if(e.length!=Math.floor(r.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var t=0,n=this.size-1;n>=1;n-=2){n==6&&(n=5);for(var a=0;a<this.size;a++)for(var s=0;s<2;s++){var l=n-s,c=(n+1&2)==0,d=c?this.size-1-a:a;!this.isFunction[d][l]&&t<e.length*8&&(this.modules[d][l]=Q(e[t>>>3],7-(t&7)),t++)}}_(t==e.length*8)}},{key:"applyMask",value:function(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(var t=0;t<this.size;t++)for(var n=0;n<this.size;n++){var a=void 0;switch(e){case 0:a=(n+t)%2==0;break;case 1:a=t%2==0;break;case 2:a=n%3==0;break;case 3:a=(n+t)%3==0;break;case 4:a=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:a=n*t%2+n*t%3==0;break;case 6:a=(n*t%2+n*t%3)%2==0;break;case 7:a=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&a&&(this.modules[t][n]=!this.modules[t][n])}}},{key:"getPenaltyScore",value:function(){for(var e=0,t=0;t<this.size;t++){for(var n=!1,a=0,s=[0,0,0,0,0,0,0],l=0;l<this.size;l++)this.modules[t][l]==n?(a++,a==5?e+=r.PENALTY_N1:a>5&&e++):(this.finderPenaltyAddHistory(a,s),n||(e+=this.finderPenaltyCountPatterns(s)*r.PENALTY_N3),n=this.modules[t][l],a=1);e+=this.finderPenaltyTerminateAndCount(n,a,s)*r.PENALTY_N3}for(var c=0;c<this.size;c++){for(var d=!1,f=0,w=[0,0,0,0,0,0,0],v=0;v<this.size;v++)this.modules[v][c]==d?(f++,f==5?e+=r.PENALTY_N1:f>5&&e++):(this.finderPenaltyAddHistory(f,w),d||(e+=this.finderPenaltyCountPatterns(w)*r.PENALTY_N3),d=this.modules[v][c],f=1);e+=this.finderPenaltyTerminateAndCount(d,f,w)*r.PENALTY_N3}for(var y=0;y<this.size-1;y++)for(var g=0;g<this.size-1;g++){var p=this.modules[y][g];p==this.modules[y][g+1]&&p==this.modules[y+1][g]&&p==this.modules[y+1][g+1]&&(e+=r.PENALTY_N2)}var h=0,M=ne(this.modules),b;try{for(M.s();!(b=M.n()).done;){var F=b.value;h=F.reduce(function(R,N){return R+(N?1:0)},h)}}catch(R){M.e(R)}finally{M.f()}var S=this.size*this.size,A=Math.ceil(Math.abs(h*20-S*10)/S)-1;return _(0<=A&&A<=9),e+=A*r.PENALTY_N4,_(0<=e&&e<=2568888),e}},{key:"getAlignmentPatternPositions",value:function(){if(this.version==1)return[];for(var e=Math.floor(this.version/7)+2,t=this.version==32?26:Math.ceil((this.version*4+4)/(e*2-2))*2,n=[6],a=this.size-7;n.length<e;a-=t)n.splice(1,0,a);return n}},{key:"finderPenaltyCountPatterns",value:function(e){var t=e[1];_(t<=this.size*3);var n=t>0&&e[2]==t&&e[3]==t*3&&e[4]==t&&e[5]==t;return(n&&e[0]>=t*4&&e[6]>=t?1:0)+(n&&e[6]>=t*4&&e[0]>=t?1:0)}},{key:"finderPenaltyTerminateAndCount",value:function(e,t,n){var a=t;return e&&(this.finderPenaltyAddHistory(a,n),a=0),a+=this.size,this.finderPenaltyAddHistory(a,n),this.finderPenaltyCountPatterns(n)}},{key:"finderPenaltyAddHistory",value:function(e,t){var n=e;t[0]==0&&(n+=this.size),t.pop(),t.unshift(n)}}],[{key:"encodeText",value:function(e,t){var n=ee.makeSegments(e);return r.encodeSegments(n,t)}},{key:"encodeBinary",value:function(e,t){var n=ee.makeBytes(e);return r.encodeSegments([n],t)}},{key:"encodeSegments",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:40,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:-1,l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;if(!(r.MIN_VERSION<=n&&n<=a&&a<=r.MAX_VERSION)||s<-1||s>7)throw new RangeError("Invalid value");var c,d;for(c=n;;c++){var f=r.getNumDataCodewords(c,t)*8,w=ee.getTotalBits(e,c);if(w<=f){d=w;break}if(c>=a)throw new RangeError("Data too long")}for(var v=t,y=0,g=[U.MEDIUM,U.QUARTILE,U.HIGH];y<g.length;y++){var p=g[y];l&&d<=r.getNumDataCodewords(c,p)*8&&(v=p)}var h=[],M=ne(e),b;try{for(M.s();!(b=M.n()).done;){var F=b.value;j(F.mode.modeBits,4,h),j(F.numChars,F.mode.numCharCountBits(c),h);var S=ne(F.getData()),A;try{for(S.s();!(A=S.n()).done;){var R=A.value;h.push(R)}}catch(L){S.e(L)}finally{S.f()}}}catch(L){M.e(L)}finally{M.f()}_(h.length==d);var N=r.getNumDataCodewords(c,v)*8;_(h.length<=N),j(0,Math.min(4,N-h.length),h),j(0,(8-h.length%8)%8,h),_(h.length%8==0);for(var k=236;h.length<N;k^=253)j(k,8,h);for(var T=[];T.length*8<h.length;)T.push(0);return h.forEach(function(L,B){return T[B>>>3]|=L<<7-(B&7)}),new r(c,v,T,s)}},{key:"getNumRawDataModules",value:function(e){if(e<r.MIN_VERSION||e>r.MAX_VERSION)throw new RangeError("Version number out of range");var t=(16*e+128)*e+64;if(e>=2){var n=Math.floor(e/7)+2;t-=(25*n-10)*n-55,e>=7&&(t-=36)}return _(208<=t&&t<=29648),t}},{key:"getNumDataCodewords",value:function(e,t){return Math.floor(r.getNumRawDataModules(e)/8)-r.ECC_CODEWORDS_PER_BLOCK[t.ordinal][e]*r.NUM_ERROR_CORRECTION_BLOCKS[t.ordinal][e]}},{key:"reedSolomonComputeDivisor",value:function(e){if(e<1||e>255)throw new RangeError("Degree out of range");for(var t=[],n=0;n<e-1;n++)t.push(0);t.push(1);for(var a=1,s=0;s<e;s++){for(var l=0;l<t.length;l++)t[l]=r.reedSolomonMultiply(t[l],a),l+1<t.length&&(t[l]^=t[l+1]);a=r.reedSolomonMultiply(a,2)}return t}},{key:"reedSolomonComputeRemainder",value:function(e,t){var n=t.map(function(){return 0}),a=ne(e),s;try{var l=function(){var d=s.value,f=d^n.shift();n.push(0),t.forEach(function(w,v){return n[v]^=r.reedSolomonMultiply(w,f)})};for(a.s();!(s=a.n()).done;)l()}catch(c){a.e(c)}finally{a.f()}return n}},{key:"reedSolomonMultiply",value:function(e,t){if(e>>>8||t>>>8)throw new RangeError("Byte out of range");for(var n=0,a=7;a>=0;a--)n=n<<1^(n>>>7)*285,n^=(t>>>a&1)*e;return _(n>>>8==0),n}}]),r}();E(G,"MIN_VERSION",1);E(G,"MAX_VERSION",40);E(G,"PENALTY_N1",3);E(G,"PENALTY_N2",3);E(G,"PENALTY_N3",40);E(G,"PENALTY_N4",10);E(G,"ECC_CODEWORDS_PER_BLOCK",[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]]);E(G,"NUM_ERROR_CORRECTION_BLOCKS",[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]]);var Wt={L:U.LOW,M:U.MEDIUM,Q:U.QUARTILE,H:U.HIGH},Ge=128,We="L",qe="#FFFFFF",Ke="#000000",Ze=!1,Xe=1,qt=4,Kt=0,Zt=.1;function Je(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=[];return r.forEach(function(t,n){var a=null;t.forEach(function(s,l){if(!s&&a!==null){e.push("M".concat(a+o," ").concat(n+o,"h").concat(l-a,"v1H").concat(a+o,"z")),a=null;return}if(l===t.length-1){if(!s)return;a===null?e.push("M".concat(l+o,",").concat(n+o," h1v1H").concat(l+o,"z")):e.push("M".concat(a+o,",").concat(n+o," h").concat(l+1-a,"v1H").concat(a+o,"z"));return}s&&a===null&&(a=l)})}),e.join("")}function et(r,o){return r.slice().map(function(e,t){return t<o.y||t>=o.y+o.h?e:e.map(function(n,a){return a<o.x||a>=o.x+o.w?n:!1})})}function Xt(r,o,e,t){if(t==null)return null;var n=r.length+e*2,a=Math.floor(o*Zt),s=n/o,l=(t.width||a)*s,c=(t.height||a)*s,d=t.x==null?r.length/2-l/2:t.x*s,f=t.y==null?r.length/2-c/2:t.y*s,w=t.opacity==null?1:t.opacity,v=null;if(t.excavate){var y=Math.floor(d),g=Math.floor(f),p=Math.ceil(l+d-y),h=Math.ceil(c+f-g);v={x:y,y:g,w:p,h}}var M=t.crossOrigin;return{x:d,y:f,h:c,w:l,excavation:v,opacity:w,crossOrigin:M}}function Jt(r,o){return o!=null?Math.floor(o):r?qt:Kt}var ea=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}();function tt(r){var o=r.value,e=r.level,t=r.minVersion,n=r.includeMargin,a=r.marginSize,s=r.imageSettings,l=r.size,c=m.useMemo(function(){var g=ee.makeSegments(o);return G.encodeSegments(g,Wt[e],t)},[o,e,t]),d=m.useMemo(function(){var g=c.getModules(),p=Jt(n,a),h=g.length+p*2,M=Xt(g,l,p,s);return{cells:g,margin:p,numCells:h,calculatedImageSettings:M}},[c,l,s,n,a]),f=d.cells,w=d.margin,v=d.numCells,y=d.calculatedImageSettings;return{qrcode:c,margin:w,cells:f,numCells:v,calculatedImageSettings:y}}var ta=["value","size","level","bgColor","fgColor","includeMargin","minVersion","marginSize","style","imageSettings"],at=I.forwardRef(function(o,e){var t=o.value,n=o.size,a=n===void 0?Ge:n,s=o.level,l=s===void 0?We:s,c=o.bgColor,d=c===void 0?qe:c,f=o.fgColor,w=f===void 0?Ke:f,v=o.includeMargin,y=v===void 0?Ze:v,g=o.minVersion,p=g===void 0?Xe:g,h=o.marginSize,M=o.style,b=o.imageSettings,F=He(o,ta),S=b==null?void 0:b.src,A=m.useRef(null),R=m.useRef(null),N=m.useCallback(function(x){A.current=x,typeof e=="function"?e(x):e&&(e.current=x)},[e]),k=m.useState(!1),T=Rt(k,2),L=T[1],B=tt({value:t,level:l,minVersion:p,includeMargin:y,marginSize:h,imageSettings:b,size:a}),$=B.margin,W=B.cells,K=B.numCells,D=B.calculatedImageSettings;m.useEffect(function(){if(A.current!=null){var x=A.current,z=x.getContext("2d");if(!z)return;var le=W,Z=R.current,ce=D!=null&&Z!==null&&Z.complete&&Z.naturalHeight!==0&&Z.naturalWidth!==0;ce&&D.excavation!=null&&(le=et(W,D.excavation));var ue=window.devicePixelRatio||1;x.height=x.width=a*ue;var de=a/K*ue;z.scale(de,de),z.fillStyle=d,z.fillRect(0,0,K,K),z.fillStyle=w,ea?z.fill(new Path2D(Je(le,$))):W.forEach(function(Ce,Se){Ce.forEach(function(we,Me){we&&z.fillRect(Me+$,Se+$,1,1)})}),D&&(z.globalAlpha=D.opacity),ce&&z.drawImage(Z,D.x+$,D.y+$,D.w,D.h)}}),m.useEffect(function(){L(!1)},[S]);var se=kt({height:a,width:a},M),te=null;return S!=null&&(te=I.createElement("img",{src:S,key:S,style:{display:"none"},onLoad:function(){L(!0)},ref:R,crossOrigin:D==null?void 0:D.crossOrigin})),I.createElement(I.Fragment,null,I.createElement("canvas",ke({style:se,height:a,width:a,ref:N,role:"img"},F)),te)});at.displayName="QRCodeCanvas";var aa=["value","size","level","bgColor","fgColor","includeMargin","minVersion","title","marginSize","imageSettings"],nt=I.forwardRef(function(o,e){var t=o.value,n=o.size,a=n===void 0?Ge:n,s=o.level,l=s===void 0?We:s,c=o.bgColor,d=c===void 0?qe:c,f=o.fgColor,w=f===void 0?Ke:f,v=o.includeMargin,y=v===void 0?Ze:v,g=o.minVersion,p=g===void 0?Xe:g,h=o.title,M=o.marginSize,b=o.imageSettings,F=He(o,aa),S=tt({value:t,level:l,minVersion:p,includeMargin:y,marginSize:M,imageSettings:b,size:a}),A=S.margin,R=S.cells,N=S.numCells,k=S.calculatedImageSettings,T=R,L=null;b!=null&&k!=null&&(k.excavation!=null&&(T=et(R,k.excavation)),L=I.createElement("image",{href:b.src,height:k.h,width:k.w,x:k.x+A,y:k.y+A,preserveAspectRatio:"none",opacity:k.opacity,crossOrigin:k.crossOrigin}));var B=Je(T,A);return I.createElement("svg",ke({height:a,width:a,viewBox:"0 0 ".concat(N," ").concat(N),ref:e,role:"img"},F),!!h&&I.createElement("title",null,h),I.createElement("path",{fill:d,d:"M0,0 h".concat(N,"v").concat(N,"H0z"),shapeRendering:"crispEdges"}),I.createElement("path",{fill:w,d:B,shapeRendering:"crispEdges"}),L)});nt.displayName="QRCodeSVG";var na={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z"}}]},name:"reload",theme:"outlined"},ra=function(o,e){return m.createElement($t,ke({},o,{ref:e,icon:na}))},oa=m.forwardRef(ra);const sa=I.createElement(zt,null);function ia(r){let{prefixCls:o,locale:e,onRefresh:t,statusRender:n,status:a}=r;const s=I.createElement(I.Fragment,null,I.createElement("p",{className:`${o}-expired`},e==null?void 0:e.expired),t&&I.createElement(fe,{type:"link",icon:I.createElement(oa,null),onClick:t},e==null?void 0:e.refresh)),l=I.createElement("p",{className:`${o}-scanned`},e==null?void 0:e.scanned),c={expired:s,loading:sa,scanned:l};return(n??(w=>c[w.status]))({status:a,locale:e,onRefresh:t})}const la=r=>{const{componentCls:o,lineWidth:e,lineType:t,colorSplit:n}=r;return{[o]:Object.assign(Object.assign({},It(r)),{display:"flex",justifyContent:"center",alignItems:"center",padding:r.paddingSM,backgroundColor:r.colorWhite,borderRadius:r.borderRadiusLG,border:`${Nt(e)} ${t} ${n}`,position:"relative",overflow:"hidden",[`& > ${o}-mask`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,zIndex:10,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",color:r.colorText,lineHeight:r.lineHeight,background:r.QRCodeMaskBackgroundColor,textAlign:"center",[`& > ${o}-expired, & > ${o}-scanned`]:{color:r.QRCodeTextColor}},"> canvas":{alignSelf:"stretch",flex:"auto",minWidth:0},"&-icon":{marginBlockEnd:r.marginXS,fontSize:r.controlHeight}}),[`${o}-borderless`]:{borderColor:"transparent",padding:0,borderRadius:0}}},ca=r=>({QRCodeMaskBackgroundColor:new At(r.colorBgContainer).setA(.96).toRgbString()}),ua=Ht("QRCode",r=>{const o=Qt(r,{QRCodeTextColor:r.colorText});return la(o)},ca);var da=function(r,o){var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&o.indexOf(t)<0&&(e[t]=r[t]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,t=Object.getOwnPropertySymbols(r);n<t.length;n++)o.indexOf(t[n])<0&&Object.prototype.propertyIsEnumerable.call(r,t[n])&&(e[t[n]]=r[t[n]]);return e};const ha=r=>{var o,e,t,n;const[,a]=Pt(),{value:s,type:l="canvas",icon:c="",size:d=160,iconSize:f,color:w=a.colorText,errorLevel:v="M",status:y="active",bordered:g=!0,onRefresh:p,style:h,className:M,rootClassName:b,prefixCls:F,bgColor:S="transparent",statusRender:A}=r,R=da(r,["value","type","icon","size","iconSize","color","errorLevel","status","bordered","onRefresh","style","className","rootClassName","prefixCls","bgColor","statusRender"]),{getPrefixCls:N}=m.useContext(Ot),k=N("qrcode",F),[T,L,B]=ua(k),$={src:c,x:void 0,y:void 0,height:typeof f=="number"?f:(o=f==null?void 0:f.height)!==null&&o!==void 0?o:40,width:typeof f=="number"?f:(e=f==null?void 0:f.width)!==null&&e!==void 0?e:40,excavate:!0,crossOrigin:"anonymous"},W=Ft(R,!0),K=Gt(R,Object.keys(W)),D=Object.assign({value:s,size:d,level:v,bgColor:S,fgColor:w,style:{width:h==null?void 0:h.width,height:h==null?void 0:h.height},imageSettings:c?$:void 0},W),[se]=jt("QRCode");if(!s)return null;const te=Dt(k,M,b,L,B,{[`${k}-borderless`]:!g}),x=Object.assign(Object.assign({backgroundColor:S},h),{width:(t=h==null?void 0:h.width)!==null&&t!==void 0?t:d,height:(n=h==null?void 0:h.height)!==null&&n!==void 0?n:d});return T(I.createElement("div",Object.assign({},K,{className:te,style:x}),y!=="active"&&I.createElement("div",{className:`${k}-mask`},I.createElement(ia,{prefixCls:k,locale:se,status:y,onRefresh:p,statusRender:A})),l==="canvas"?I.createElement(at,Object.assign({},D)):I.createElement(nt,Object.assign({},D))))},$e=r=>{const[o,e]=m.useState(O());m.useEffect(()=>{e(r.value)},[r.value]),m.useEffect(()=>{r.onChange&&r.onChange(o)},[o]);const t=a=>{a||(a=O().year(0).month(0).day(0));let s=(o==null?void 0:o.clone())??O();s=s==null?void 0:s.year(a.year()),s=s==null?void 0:s.month(a.month()),s=s==null?void 0:s.date(a.date()),e(s||void 0)},n=a=>{if(a||(a=O().hour(0).minute(0).second(0)),!a)return;let s=(o==null?void 0:o.clone())??O();s=s==null?void 0:s.hour(a.hour()),s=s==null?void 0:s.minute(a.minute()),s=s==null?void 0:s.second(a.second()),e(s||void 0)};return C.jsxs(C.Fragment,{children:[C.jsx(be,{onChange:t,value:o,placeholder:r.placeholder,disabled:r.disabled}),C.jsx(Re,{onChange:n,value:o,disabled:r.disabled})]})},fa=r=>{const[o,e]=m.useState(!1),[t,n]=m.useState(!1),[a,s]=m.useState("新增考勤");m.useEffect(()=>{e(r.show),r.show&&l()},[r.show]),m.useEffect(()=>{r.showChange(o)},[o]);const l=async()=>{if(F([{label:"普通",value:V.Normal},{label:"密码",value:V.Password},{label:"二维码",value:V.TowCode}]),M(""),r.model=="add")s("新增考勤批次"),v.setFieldsValue({...f});else if(r.model=="put"){s("修改考勤批次");const S=await re.apiAttendanceBatchIdGet(r.id);w({...f,...S.data.data}),v.setFieldsValue({...S.data.data})}M("")},c=()=>{e(!1)},d=()=>{v.submit()},[f,w]=m.useState({startTime_:O(),endTime_:O()}),[v]=J.useForm(),y=async S=>{try{if(await v.validateFields(),n(!0),S.startTime=S.startTime_.format(),S.endTime=S.endTime_.format(),r.model=="add")await re.apiAttendanceBatchPost(S);else if(r.model=="put"){const A=S;A.id=r.id,await re.apiAttendanceBatchPut(A)}r.onFinish(),e(!1)}catch{}n(!1)},g=S=>{w({...v.getFieldsValue()})};m.useEffect(()=>{r.show&&v.setFieldsValue({...f})},[f,r.show]);const[p,h]=m.useState(),M=async S=>{var N,k;const R=((k=(N=(await Ae.apiCourseGet([],[],void 0,void 0,1,9999,S)).data.data)==null?void 0:N.dataList)==null?void 0:k.map(T=>({label:T.name,value:T.id})))||[];h(R)},[b,F]=m.useState();return C.jsx(Qe,{title:a,open:o,onOk:d,onCancel:c,confirmLoading:t,children:C.jsxs(J,{layout:"vertical",form:v,onFinish:y,onValuesChange:g,children:[C.jsx(J.Item,{name:"courseId",label:"课程",rules:[{required:!0,message:"不能为空"}],children:C.jsx(me,{showSearch:!0,placeholder:"输入搜索课程",options:p,onSearch:M,optionFilterProp:"label"})}),C.jsx(J.Item,{name:"checkMethod",label:"考勤方式",rules:[{required:!0,message:"不能为空"}],children:C.jsx(me,{showSearch:!0,placeholder:"选择考勤方式",options:b})}),C.jsx(J.Item,{name:"startTime_",label:"开始时间",rules:[{required:!0,message:"不能为空"}],children:C.jsx($e,{placeholder:"开始"})}),C.jsx(J.Item,{name:"endTime_",label:"结束时间",rules:[{required:!0,message:"不能为空"}],children:C.jsx($e,{placeholder:"结束"})}),f.checkMethod==V.Password&&C.jsx(J.Item,{name:"passWord",label:"密码",rules:[{required:!0,message:"不能为空"}],children:C.jsx(_t,{})})]})})},ma=r=>{const[o,e]=m.useState(!1);m.useEffect(()=>{e(r.show),r.show&&t()},[r.show]),m.useEffect(()=>{r.showChange(o)},[o]);const t=async()=>{var p,h,M,b;const w=await re.apiAttendanceBatchIdGet(r.id),v=await Ae.apiCourseIdGet(((p=w.data.data)==null?void 0:p.courseId)||-1),y=await Tt.apiAccountIdGet(((h=v.data.data)==null?void 0:h.teacherId)||""),g={...w.data.data,courseName:(M=v.data.data)==null?void 0:M.name,teacherName:(b=y.data.data)==null?void 0:b.name};l(g)},n=()=>{e(!1)},a=()=>{e(!1)},[s,l]=m.useState({}),[c,d]=m.useState("");m.useEffect(()=>{switch(s.checkMethod){case V.Normal:d("普通");break;case V.Password:d("密码");break;case V.TowCode:d("二维码");break}},[s.checkMethod]);const f=[{key:H(),label:"课程名",children:s.courseName},{key:H(),label:"课程老师",children:s.teacherName,span:"filled"},{key:H(),label:"开始时间",children:O(s.startTime).format("YYYY-MM-DD hh:mm:ss"),span:"filled"},{key:H(),label:"结束时间",children:O(s.endTime).format("YYYY-MM-DD hh:mm:ss"),span:"filled"},{key:H(),label:"类型",children:c,span:"filled"},{key:H(),label:"创建时间",children:O(s.createdAt).format("YYYY-MM-DD hh:mm:ss")},{key:H(),label:"更新时间",children:O(s.updatedAt).format("YYYY-MM-DD hh:mm:ss"),span:"filled"},...s.checkMethod==V.Password?[{key:H(),label:"密码",children:s.passWord}]:[],...s.checkMethod==V.TowCode?[{key:H(),label:"二维码",children:C.jsx(ha,{value:s.qrCode||"-"})}]:[]];return C.jsx(Qe,{title:"考勤批次详情",open:o,onOk:a,onCancel:n,children:C.jsx(Ut,{bordered:!0,items:f})})},Fa=()=>{var Oe,De,Fe,Te,ze,Le;const[r,o]=m.useState([]),[e,t]=m.useState(0),[n,a]=m.useState(1),[s,l]=m.useState(20),[c,d]=m.useState(""),[f,w]=m.useState(""),[v,y]=m.useState([]),[g,p]=m.useState(null),[h,M]=m.useState(null),[b,F]=m.useState(void 0),[S,A]=m.useState(void 0),R=xt(),N=Vt(),[k,T]=m.useState("add"),[L,B]=m.useState(!1),[$,W]=m.useState(-1),[K,D]=m.useState(!1),[se,te]=m.useState(-1);m.useEffect(()=>{x()},[]);const x=async()=>{await z(),Ne(""),Ee("")},z=async(u=n,i=s,P=c,q=f,ye=g,pe=h,St=b,wt=S,Mt=v)=>{var je,_e,xe;var Be=await re.apiAttendanceBatchGet(Mt,q,(ye==null?void 0:ye.format())??void 0,(pe==null?void 0:pe.format())??void 0,St,wt,u,i,P);const Et=((_e=(je=Be.data.data)==null?void 0:je.dataList)==null?void 0:_e.map(async Ve=>{var Ue;const pt=await Ae.apiCourseIdGet(Ve.courseId);return{...Ve,courseName:(Ue=pt.data.data)==null?void 0:Ue.name}}))||[],yt=await Promise.all(Et);o(yt||[]),t(((xe=Be.data.data)==null?void 0:xe.total)||0)},le=[{title:"课程名",dataIndex:"courseName",key:"courseName"},{title:"开始时间",dataIndex:"startTime",key:"startTime",render:(u,i)=>O(i.startTime).format("YYYY-MM-DD HH:mm:ss")},{title:"结束时间",dataIndex:"endTime",key:"endTime",render:(u,i)=>O(i.endTime).format("YYYY-MM-DD HH:mm:ss")},{title:"类型",key:"checkMethod",dataIndex:"checkMethod",render:(u,i)=>{switch(i.checkMethod){case V.Normal:return"普通";case V.Password:return"密码";case V.TowCode:return"二维码"}}},{title:"操作",key:"action",render:(u,i)=>C.jsxs(he,{size:"middle",children:[C.jsx("a",{onClick:()=>Ce(i.id),children:"查看"}),C.jsx("a",{onClick:()=>de(i.id),children:"修改"}),C.jsx(Bt,{title:"提示",description:"确定删除此考勤批次?",onConfirm:()=>ue(i),okText:"确定",cancelText:"取消",children:C.jsx(fe,{danger:!0,children:"删除"})})]})}],Z=async(u,i)=>{a(u),l(i),await z(u,i)},ce=async()=>{T("add"),B(!0)},ue=async u=>{await re.apiAttendanceBatchIdDelete(u.id),await z()},de=async u=>{T("put"),B(!0),W(u)},Ce=async u=>{D(!0),te(u)},Se=u=>{d(u.target.value)},we=async(u,i,P)=>{(P==null?void 0:P.source)=="input"&&(d(u),a(1),await z(1,void 0,u))},Me=u=>{w(u.target.value)},rt=async(u,i,P)=>{(P==null?void 0:P.source)=="input"&&(w(u),a(1),await z(1,void 0,void 0,u))},ot=u=>{if(!u){p(null);return}let i=(g==null?void 0:g.clone())??O();i=i==null?void 0:i.year(u.year()),i=i==null?void 0:i.month(u.month()),i=i==null?void 0:i.date(u.date()),p(i||null)},st=u=>{if(!u){p(null);return}let i=(g==null?void 0:g.clone())??O();i=i==null?void 0:i.hour(u.hour()),i=i==null?void 0:i.minute(u.minute()),i=i==null?void 0:i.second(u.second()),p(i||null)},it=u=>{if(!u){M(null);return}let i=(h==null?void 0:h.clone())??O();i=i==null?void 0:i.year(u.year()),i=i==null?void 0:i.month(u.month()),i=i==null?void 0:i.date(u.date()),M(i||null)},lt=u=>{if(!u){M(null);return}let i=(h==null?void 0:h.clone())??O();i=i==null?void 0:i.hour(u.hour()),i=i==null?void 0:i.minute(u.minute()),i=i==null?void 0:i.second(u.second()),M(i||null)},ct=async()=>{a(1),await z(1)},[X,ut]=m.useState([]),[dt,Ie]=m.useState(""),Ne=async u=>{Ie(u);const i=N.majorsCategories.map(P=>({label:P.name,value:P.id}));ut(i||[])},ht=u=>{var i;F(u),Ie(((i=X==null?void 0:X.find(P=>P.value==u))==null?void 0:i.label)+""),Ee("",u)},[ft,mt]=m.useState([]),[vt,Pe]=m.useState(""),Ee=async(u,i=b)=>{if(Pe(u),!i)return;const P=N.majorsSubcategories.filter(q=>q.majorsCategoriesId==i).map(q=>({label:q.name,value:q.id}));mt(P||[])},gt=u=>{var i;A(u),Pe(((i=X==null?void 0:X.find(P=>P.value==u))==null?void 0:i.label)+"")},Ct=(u,i,P,q)=>C.jsx(Yt,{dataUpdate:q,batchId:u.id});return C.jsxs(he,{direction:"vertical",style:{width:"100%"},children:[C.jsxs(he,{children:[C.jsx(Ye,{placeholder:"输入查询的课程名",onSearch:we,enterButton:!0,onChange:Se}),(((Oe=R.user)==null?void 0:Oe.roles.includes(ae.Admin))||((De=R.user)==null?void 0:De.roles.includes(ae.Academic))||((Fe=R.user)==null?void 0:Fe.roles.includes(ae.Student)))&&C.jsx(Ye,{placeholder:"输入查询的老师名",onSearch:rt,enterButton:!0,onChange:Me}),C.jsx(be,{onChange:ot,placeholder:"开始日期"}),C.jsx(Re,{onChange:st,defaultOpenValue:O("00:00:00","HH:mm:ss")}),"-",C.jsx(be,{onChange:it,placeholder:"结束日期"}),C.jsx(Re,{onChange:lt,defaultOpenValue:O("00:00:00","HH:mm:ss")}),C.jsx(fe,{type:"primary",onClick:()=>ct(),children:"查询"}),(Te=R.user)!=null&&Te.roles.includes(ae.Admin)||(ze=R.user)!=null&&ze.roles.includes(ae.Teacher)||(Le=R.user)!=null&&Le.roles.includes(ae.Academic)?C.jsx(fe,{type:"primary",onClick:()=>ce(),children:"新增"}):C.jsx(C.Fragment,{})]}),C.jsxs(he,{children:[C.jsx(me,{showSearch:!0,placeholder:"输入搜索大专业名称",options:X,value:b,onChange:ht,onSearch:Ne,searchValue:dt,optionFilterProp:"label"}),C.jsx(me,{showSearch:!0,placeholder:"输入搜索细分专业名称",options:ft,value:S,onChange:gt,optionFilterProp:"label",onSearch:Ee,searchValue:vt})]}),C.jsx(Lt,{columns:le,pagination:{position:["bottomCenter"],total:e,showSizeChanger:!0,current:n,pageSize:s,onChange:Z},dataSource:r,expandable:{expandedRowRender:Ct},rowKey:"id"}),C.jsx(fa,{show:L,showChange:u=>B(u),onFinish:z,id:$,model:k}),C.jsx(ma,{show:K,showChange:u=>D(u),id:se})]})};export{Fa as default};
